<div class="min-h-screen bg-gradient-to-tr from-[#eef2ff] via-[#f0fdf4] to-[#fff7ed] flex items-center justify-center px-4 py-14">
  <mat-card class="w-full max-w-5xl bg-white rounded shadow-2xl overflow-hidden border border-gray-200">

    <!-- Header -->
    <div class="text-center  text-black bg-blue-200 rounded-t-2xl p-8">
      <img src="PSF_Logo.png" alt="PSF Logo" class="h-16 mx-auto mb-4 drop-shadow-lg transition-transform duration-300 hover:scale-110" />
      <h1 class="text-4xl font-extrabold tracking-tight mb-2">Join the PSF Movement</h1>
      <p class="text-sm opacity-90">Empowering professionals through unity, service & growth</p>
    </div>

    <!-- Form Body -->
    <mat-card-content class="p-8 sm:p-12 space-y-12 bg-white">

      <!-- Step 1 -->
      <div class="bg-white border border-gray-200 rounded-3xl p-6 sm:p-8 shadow-md hover:shadow-lg transition mt-10">
        <h2 class="text-2xl font-bold text-gray-900 mb-4 flex items-center gap-2">
          <span class="text-indigo-600">①</span> Membership Amount
        </h2>

        <!-- Custom Input -->
        <mat-form-field class="w-full">
          <mat-label>Enter custom amount (₹)</mat-label>
          <input matInput type="number" [formControl]="customAmountControl" (input)="onCustomAmountChange()" placeholder="Minimum ₹300">
          <span matPrefix>₹</span>
          <mat-error *ngIf="customAmountControl.hasError('required')">Amount is required</mat-error>
          <mat-error *ngIf="customAmountControl.hasError('min') || showMinimumError">Minimum ₹300</mat-error>
          <mat-error *ngIf="customAmountControl.hasError('pattern')">Enter a valid number</mat-error>
        </mat-form-field>

        <!-- Quick Select -->
        <div class="mt-6">
          <p class="text-sm font-medium text-gray-600 mb-2">Or choose a quick amount:</p>
          <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
            <button *ngFor="let plan of presetPlans"
              mat-raised-button
              (click)="selectPresetAmount(plan.amount)"
              [ngClass]="selectedAmount === plan.amount
                ? 'bg-indigo-600 text-white hover:bg-indigo-700'
                : 'bg-white border border-gray-300 text-gray-800 hover:border-indigo-400'"
              class="rounded-xl py-2 px-3 text-base font-medium transition-all duration-200">
              ₹{{ plan.amount }}
              <span *ngIf="plan.recommended" class="block text-xs text-green-600 mt-1 font-semibold">Recommended</span>
            </button>
          </div>
        </div>

        <!-- Validation -->
        <div *ngIf="showMinimumError" class="flex items-center gap-2 mt-4 text-red-600 text-sm">
          <mat-icon>error</mat-icon> Minimum amount is ₹300
        </div>
      </div>

      <!-- Step 2 -->
      <div *ngIf="isAmountValid" class="bg-white border border-gray-200 rounded-3xl p-6 sm:p-8 shadow-md hover:shadow-lg transition">
        <h2 class="text-2xl font-bold text-gray-900 mb-4 flex items-center gap-2">
          <span class="text-indigo-600">②</span> Payment Type
        </h2>

        <mat-radio-group [(ngModel)]="paymentType" (change)="onPaymentTypeChange($event.value)" class="space-y-4">
          <mat-radio-button value="autopay" class="block">
            <div class="rounded-xl border-2 p-5"
              [class.border-indigo-600]="paymentType === 'autopay'"
              [class.bg-indigo-50]="paymentType === 'autopay'"
              [class.border-gray-300]="paymentType !== 'autopay'">
              <div class="flex justify-between items-start">
                <div>
                  <p class="font-semibold text-gray-800">AutoPay Subscription</p>
                  <p class="text-sm text-gray-600">₹{{ selectedAmount }} billed monthly</p>
                </div>
                <span class="bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-semibold">Save 10%</span>
              </div>
              <p class="text-xs text-indigo-700 mt-2">Cancel anytime via dashboard</p>
            </div>
          </mat-radio-button>

          <mat-radio-button value="one-time" class="block">
            <div class="rounded-xl border-2 p-5"
              [class.border-indigo-600]="paymentType === 'one-time'"
              [class.bg-indigo-50]="paymentType === 'one-time'"
              [class.border-gray-300]="paymentType !== 'one-time'">
              <p class="font-semibold text-gray-800">One-Time Payment</p>
              <p class="text-sm text-gray-600 mt-1">₹{{ selectedAmount }} for 1-month membership only</p>
            </div>
          </mat-radio-button>
        </mat-radio-group>
      </div>

      <!-- Summary -->
      <div *ngIf="isAmountValid" class="bg-indigo-50 border border-indigo-100 rounded-3xl p-6 sm:p-8 shadow-md">
        <h2 class="text-lg font-bold text-indigo-800 mb-3">Membership Summary</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-gray-800">
          <div><span class="font-semibold">Type:</span> {{ getSelectedPresetPlan()?.name || 'Custom Individual Member' }}</div>
          <div><span class="font-semibold">Amount:</span> ₹{{ selectedAmount }}</div>
          <div><span class="font-semibold">Duration:</span> {{ paymentType === 'autopay' ? 'Monthly' : '1 Month Only' }}</div>
          <div *ngIf="paymentType === 'autopay'"><span class="font-semibold">Next Charge:</span> {{ getNextChargeDate() }}</div>
        </div>
      </div>

      <!-- Benefits -->
      <div *ngIf="isAmountValid" class="bg-white border border-gray-200 rounded-3xl p-6 shadow-sm">
        <h2 class="text-lg font-bold text-gray-800 mb-3">Benefits</h2>
        <ul class="grid grid-cols-1 sm:grid-cols-2 gap-2 list-disc list-inside text-sm text-gray-700">
          <li>Access to exclusive PSF events</li>
          <li>Professional networking opportunities</li>
          <li>Community service participation</li>
          <li>Skill-building resources</li>
          <li>Voting rights in PSF elections</li>
          <li *ngIf="selectedAmount >= 700">Priority event registration</li>
          <li *ngIf="selectedAmount >= 1000">Premium networking sessions</li>
          <li *ngIf="selectedAmount >= 1000">Exclusive mentorship</li>
        </ul>
      </div>
    </mat-card-content>

    <!-- CTA Button -->
    <mat-card-actions class="px-8 pb-12 flex flex-col gap-4 bg-white">
      <button
        mat-raised-button
        class="w-full py-3 bg-green-600 rounded-xl text-lg font-semibold flex items-center justify-center gap-2 transition-all"
        [disabled]="!isPaymentButtonEnabled()"
        [ngClass]="isPaymentButtonEnabled()
          ? 'bg-gradient-to-r from-indigo-600 to-blue-500 hover:from-indigo-700 hover:to-blue-600 text-white shadow-lg'
          : 'bg-gray-300 text-gray-500 cursor-not-allowed'"
        (click)="initiatePayment()">
        <mat-spinner diameter="20" *ngIf="loading || paymentProcessing"></mat-spinner>
        <span>{{ getPaymentButtonText() }}</span>
        <mat-icon>arrow_forward</mat-icon>
      </button>

      <!-- Info Notes -->
      <div *ngIf="isAmountValid" class="text-sm text-gray-600 space-y-2">
        <div *ngIf="paymentType === 'autopay'" class="flex items-start gap-2 bg-indigo-50 p-3 rounded-md">
          <mat-icon>info</mat-icon>
          <span>Your membership will auto-renew monthly. Cancel anytime from your dashboard.</span>
        </div>
        <div *ngIf="paymentType === 'one-time'" class="flex items-start gap-2 bg-indigo-50 p-3 rounded-md">
          <mat-icon class="">info</mat-icon>
          <span>This is a one-time payment for 1-month membership only.</span>
        </div>
      </div>
    </mat-card-actions>

    <!-- Footer -->
    <mat-card-footer class="bg-gray-50 p-4 border-t border-gray-200 text-sm text-gray-600 flex items-center justify-center gap-2">
      <mat-icon class="text-green-500">lock</mat-icon>
      <span>Secure payment powered by</span>
      <img src="https://razorpay.com/assets/razorpay-glyph.svg" alt="Razorpay" class="h-5 ml-1">
    </mat-card-footer>

  </mat-card>
</div>
