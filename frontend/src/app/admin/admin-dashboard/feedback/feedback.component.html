<div class="event-feedback-container">

  <!-- Page Header -->
  <div class="page-header mb-6">
    <div class="title-section">
      <h2 class="text-2xl font-bold text-gray-800">Event Feedback</h2>
      <p class="text-sm text-gray-500">Review ratings and comments from attendees</p>
    </div>
  </div>

  <!-- Feedback Summary (Optional Stats Section) -->
  <div class="stats-cards grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-6">
    <mat-card class="stat-card">
      <mat-card-content>
        <div class="flex items-center gap-4">
          <mat-icon class="text-blue-600">chat</mat-icon>
          <div>
            <div class="text-xl font-semibold">{{ feedbackList.length }}</div>
            <div class="text-gray-600 text-sm">Total Feedback</div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card" *ngIf="feedbackList.length > 0">
      <mat-card-content>
        <div class="flex items-center gap-4">
          <mat-icon class="text-yellow-500">star</mat-icon>
          <div>
            <div class="text-xl font-semibold">
              {{
                feedbackList.reduce((sum, f) => sum + f.rating, 0) / feedbackList.length | number: '1.1-1'
              }}
            </div>
            <div class="text-gray-600 text-sm">Average Rating</div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Loading -->
  <div class="text-center my-6" *ngIf="loading">
    <mat-spinner diameter="40"></mat-spinner>
  </div>

  <!-- Error Message -->
  <div *ngIf="error && !loading" class="text-center text-red-600 my-4">
    <p class="mb-2">{{ error }}</p>
    <button mat-raised-button color="primary" (click)="fetchFeedback()">Retry</button>
  </div>

  <!-- Feedback List -->
  <div *ngIf="!loading && feedbackList.length > 0" class="grid gap-4">
    <mat-card *ngFor="let feedback of feedbackList" class="shadow-md">
      <mat-card-content>
        <div class="flex justify-between items-center mb-2">
          <h3 class="text-base font-semibold">
            {{ feedback.user?.name || 'Anonymous' }}
          </h3>
          <span class="text-yellow-500 font-medium">
            Rating: {{ feedback.rating }} / 5
          </span>
        </div>
        <p class="text-gray-700" *ngIf="feedback.comments">{{ feedback.comments }}</p>
        <p class="text-xs text-gray-500 mt-2">Submitted on {{ feedback.created_at | date:'medium' }}</p>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- No Feedback -->
  <div *ngIf="!loading && feedbackList.length === 0" class="text-center text-gray-500 mt-4">
    No feedback submitted yet for this event.
  </div>
</div>
